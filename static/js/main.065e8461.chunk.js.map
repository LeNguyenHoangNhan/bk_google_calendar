{"version":3,"sources":["components/GuideLine/GuideLine.jsx","components/CalendarInput/CalendarInput.jsx","components/CalendarSelector/CalendarSelector.jsx","components/DownloadButton/DownloadButton.jsx","components/FileUsageGuide/FileUsageGuide.jsx","utils/generator.js","App.js","utils/parser.js","reportWebVitals.js","index.js"],"names":["GuideLine","props","className","num","text","CalendarInputField","rows","type","value","onChange","placeholder","wrap","CalendarSelector","selectors","classList","map","eachClass","index","class","id","signature","name","changeHandler","checked","selected","htmlFor","length","DownloadButton","onClick","clickHandler","disabled","isDownloadable","FileUsageGuide","useState","showDetails","setShowDetails","href","toTimeString","week","dayOfWeek","time","times","match","date","Date","weekOfset","dayOfset","setDate","getDate","toISOString","split","replace","generateClass","clss","repeatTime","i","push","uuidv4","ID","group","room","campus","join","App","state","calendarInput","timeTableValid","handleCalendarInputChange","bind","handleCalendarSelect","handleDownload","event","this","setState","target","input","line","lineCount","tokenizedLine","trim","isNaN","parseInt","toString","parseCalendarInput","targetSignature","content","generateICSFileContent","blob","Blob","FileSaver","saveAs","StrictMode","filter","c","React","Component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"iXAYeA,MATf,SAAmBC,GACf,OAAO,sBAAKC,UAAU,qBAAf,UACH,sBAAMA,UAAU,oBAAhB,SACKD,EAAME,MAEX,sBAAMD,UAAU,yBAAhB,SAA0CD,EAAMG,W,MCFzCC,MAJf,SAA4BJ,GACxB,OAAO,0BAAUK,KAAK,IAAIC,KAAK,OAAOC,MAAOP,EAAMO,MAAOC,SAAUR,EAAMQ,SAAUP,UAAU,iBAAiBQ,YAAY,mDAAiCC,KAAK,U,MCgBtJC,MAjBf,SAA0BX,GACtB,IAAMY,EAAYZ,EAAMa,UAAUC,KAAI,SAACC,EAAWC,GAC9C,OAAO,sBAA+BC,MAAM,qBAArC,UACH,uBAAOC,GAAIH,EAAUI,UAAWb,KAAK,WAAWc,KAAML,EAAUK,KAAMb,MAAOQ,EAAUI,UAAWX,SAAUR,EAAMqB,cAAeC,QAASP,EAAUQ,SAAUtB,UAAU,4BACxK,uBAAOuB,QAAST,EAAUI,UAAWlB,UAAU,uBAA/C,SACKc,EAAUK,OAEf,yBALaL,EAAUI,cAU/B,OAAO,qBAAKF,MAAOjB,EAAMa,UAAUY,OAAS,EAAI,4BAA8B,kCAAvE,SACFb,K,MCTMc,MAJf,SAAwB1B,GACpB,OAAO,wBAAQ2B,QAAS3B,EAAM4B,aAAcC,UAAW7B,EAAM8B,eAAgB7B,UAAU,kBAAhF,kC,aCgCI8B,MAhCf,WACI,MAAoCC,oBAAS,GAA7C,mBAAKC,EAAL,KAAkBC,EAAlB,KAIA,OAAO,sBAAKjC,UAAW,2BAAhB,UACH,oBAAGA,UAAU,4BAA4B0B,QAJ7C,WACIO,GAAgBD,IAGhB,UACI,mBAAGhC,UAAS,qCAAgCgC,EAAc,aAAe,iBACzE,sBAAMhC,UAAU,WAAhB,0GAGJ,sBAAKA,UAAS,2BAAsBgC,EAAc,wBAA0B,yBAA5E,UACI,oGACA,+BACI,mGAAsC,mBAAGE,KAAK,8BAAR,yCAAtC,OACA,kDAAY,kDAAZ,2GAAyF,qDAAzF,OACA,yEAAwB,0DAAxB,OACA,kDAAY,2EAAZ,OACA,+IAAoD,8CAApD,OACA,uPAA6G,mBAAGA,KAAK,yDAAR,yBAA7G,OACA,kDAAY,0CAAZ,UAEJ,qHACA,+BACI,0MACA,wOACA,6H,YC3BhB,SAASC,EAAaC,EAAMC,EAAWC,GACnC,IAAIC,EAAQD,EAAKE,MAAM,QAEnBC,EAAO,IAAIC,KAAK,KAAM,EAAG,GAAIH,EAAM,GAAIA,EAAM,IAE3CI,EAAYP,EAAO,GACnBQ,EAAWP,EAAY,EAK7B,OAHAI,EAAKI,QAAQJ,EAAKK,UAAyB,EAAZH,EAAiBC,IAC/BH,EAAKM,cAEHC,MAAM,KAAK,GAAK,KAAKC,QAAQ,KAAM,IAAIA,QAAQ,KAAM,IAG5E,SAASC,EAAcC,GAGnB,IAFA,IAAIC,EAAa,GAERC,EAAI,EAAGA,EAAIF,EAAKf,KAAKZ,OAAQ6B,IAClCD,EAAWE,KAAKnB,EAAagB,EAAKf,KAAKiB,GAAIF,EAAKd,UAAWc,EAAKb,KAAK,KAazE,MAVW,4BACTiB,cADS,uBAEJ,IAAIb,MAAOK,cAAcC,MAAM,KAAK,GAAK,KAAKC,QAAQ,KAAM,IAAIA,QAAQ,KAAM,IAF1E,qBAGLE,EAAKhC,KAHA,uCAIOgC,EAAKK,GAJZ,8BAI4BL,EAAKM,MAJjC,sBAKJN,EAAKO,KALD,aAKUP,EAAKQ,OALf,qBAMLxB,EAAagB,EAAKf,KAAK,GAAIe,EAAKd,UAAWc,EAAKb,KAAK,IANhD,mBAOPH,EAAagB,EAAKf,KAAK,GAAIe,EAAKd,UAAWc,EAAKb,KAAK,IAP9C,mBAQPc,EAAWQ,KAAK,KART,gB,oBC+CAC,E,kDArDX,WAAY9D,GAAQ,IAAD,8BACf,cAAMA,IACD+D,MAAQ,CACTC,cAAe,GACfnD,UAAW,GACXoD,gBAAgB,GAEpB,EAAKC,0BAA4B,EAAKA,0BAA0BC,KAA/B,gBACjC,EAAKC,qBAAuB,EAAKA,qBAAqBD,KAA1B,gBAC5B,EAAKE,eAAiB,EAAKA,eAAeF,KAApB,gBATP,E,6DAYnB,SAA0BG,GACtBC,KAAKC,SAAS,CAAER,cAAeM,EAAMG,OAAOlE,QAE5C,IAAMM,EChCd,SAA4B6D,GAMxB,IALA,IAAIC,EAAOD,EAAMzB,MAAM,MAEjB2B,EAAYD,EAAKlD,OACnBZ,EAAY,GAEPyC,EAAI,EAAGA,EAAIsB,EAAWtB,IAAK,CAChC,IAAIuB,EAAgBF,EAAKrB,GAAGL,MAAM,MAElC,KAAI4B,EAAcpD,OAAS,IAA3B,CAIA,IAAIgC,EAAKoB,EAAc,GAAGC,OACtB1D,EAAOyD,EAAc,GAAGC,OAExBpB,EAAQmB,EAAc,GAAGC,OAEzBxC,EAAYuC,EAAc,GAAGC,OACjC,IAAIC,MAAMC,SAAS1C,EAAW,KAA9B,CAGIA,EAAY0C,SAAS1C,EAAW,IAGpC,IAAIC,EAAOsC,EAAc,GAAGC,OAAOrC,MAAM,YACzC,GAAa,OAATF,EAAJ,CAIA,IAAIoB,EAAOkB,EAAc,GAAGC,OACxBlB,EAASiB,EAAc,GAAGC,OAE1BzC,EAAOwC,EAAc,IAAIC,OAAOrC,MAAM,QAC7B,OAATJ,GAGJxB,EAAU0C,KAAK,CACXpC,UAAWsC,EAAKnB,EAAU2C,WAAa5C,EAAKwB,KAAK,IACjDJ,KACArC,OACAkB,YACAC,OACAoB,OACAC,SACAvB,OACAd,UAAU,EACVmC,aAIR,OAAO7C,EDnBeqE,CAAmBZ,EAAMG,OAAOlE,OAElDgE,KAAKC,SAAS,CAAE3D,gB,kCAGpB,SAAqByD,GAGjB,IAFA,IAAMa,EAAkBb,EAAMG,OAAOlE,MACjCM,EAAY0D,KAAKR,MAAMlD,UAClByC,EAAI,EAAGA,EAAIzC,EAAUY,OAAQ6B,IAClC,GAAIzC,EAAUyC,GAAGnC,YAAcgE,EAAiB,CAC5CtE,EAAUyC,GAAG/B,UAAYV,EAAUyC,GAAG/B,SACtC,MAGRgD,KAAKC,SAAS,CAAE3D,gB,4BAGpB,SAAeyD,GACX,IAAMc,EDdd,SAAgCvE,GAK5B,IAJA,IAAIuE,EAAO,6EAIF9B,EAAI,EAAGA,EAAIzC,EAAUY,OAAQ6B,IAC9BzC,EAAUyC,GAAG/B,WACb6D,GAAO,YACjBjC,EAActC,EAAUyC,MAMtB,OAFA8B,EAAO,kBCEaC,CAAuBd,KAAKR,MAAMlD,WAC9CyE,EAAO,IAAIC,KAAK,CAACH,GAAU,CAAE9E,KAAM,kBACvCkF,IAAUC,OAAOH,EAAM,gB,oBAE3B,WACI,OAAO,cAAC,IAAMI,WAAP,UACH,sBAAKxE,GAAG,cAAR,UACI,oBAAIjB,UAAU,SAAd,gCACA,oBAAIA,UAAU,qBACd,cAAC,EAAD,CAAWC,IAAK,EAAGC,KAAM,sIACzB,cAAC,EAAD,CAAoBI,MAAOgE,KAAKR,MAAMC,cAAexD,SAAU+D,KAAKL,4BACpE,cAAC,EAAD,CAAWhE,IAAK,EAAGC,KAAM,yHACzB,cAAC,EAAD,CAAkBU,UAAW0D,KAAKR,MAAMlD,UAAWQ,cAAekD,KAAKH,uBACvE,cAAC,EAAD,CAAWlE,IAAK,EAAGC,KAAM,uFACzB,cAAC,EAAD,CAAgB2B,eAAgD,IAAhCyC,KAAKR,MAAMlD,UAAUY,QAAwE,IAAxD8C,KAAKR,MAAMlD,UAAU8E,QAAO,SAAAC,GAAC,OAAIA,EAAErE,YAAUE,OAAcG,aAAc2C,KAAKF,iBACnJ,cAAC,EAAD,a,GAlDEwB,IAAMC,WEHTC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMf,WAAP,UACE,cAAC,EAAD,MAEFgB,SAASC,eAAe,SAM1BZ,M","file":"static/js/main.065e8461.chunk.js","sourcesContent":["import React from 'react';\nimport \"./GuideLine.css\";\n\nfunction GuideLine(props) {\n    return <div className=\"guide-line_wrapper\">\n        <span className=\"guide-line_number\">\n            {props.num}\n        </span>\n        <span className=\"guide-line_description\">{props.text}</span>\n    </div>\n}\n\nexport default GuideLine;","import React from 'react';\nimport './CalendarInput.css';\nfunction CalendarInputField(props) {\n    return <textarea rows=\"5\" type='text' value={props.value} onChange={props.onChange} className='calendar-input' placeholder=\"CO2011\tMô hình hóa toán học...\" wrap=\"soft\"></textarea>\n}\n\nexport default CalendarInputField;","import React from 'react';\nimport './CalendarSelector.css';\nfunction CalendarSelector(props) {\n    const selectors = props.classList.map((eachClass, index) => {\n        return <div key={eachClass.signature} class=\"class-item_wrapper\">\n            <input id={eachClass.signature} type='checkbox' name={eachClass.name} value={eachClass.signature} onChange={props.changeHandler} checked={eachClass.selected} className=\"class-selector_checkbox\" />\n            <label htmlFor={eachClass.signature} className='class-selector_label'>\n                {eachClass.name}\n            </label>\n            <br />\n        </div>\n    }\n    );\n\n    return <div class={props.classList.length > 0 ? \"calendar-selector_wrapper\" : \"calendar-selector_wrapper-empty\"} >\n        {selectors}\n    </ div>;\n}\n\nexport default CalendarSelector;","import React from 'react';\nimport './DownloadButton.css';\nfunction DownloadButton(props) {\n    return <button onClick={props.clickHandler} disabled={!props.isDownloadable} className=\"download-button\">Tải xuống</button>\n}\n\nexport default DownloadButton;","import React, { useState } from 'react';\nimport \"./FileUsageGuide.css\";\n\nfunction FileUsageGuide() {\n    let [showDetails, setShowDetails] = useState(false);\n    function clickHandler() {\n        setShowDetails(!showDetails);\n    }\n    return <div className={'file-usage-guide_wrapper'}>\n        <p className=\"file-usage-guide_question\" onClick={clickHandler}>\n            <i className={`fas fa-chevron-right arrow ${showDetails ? 'point-down' : 'point-right'}`}></i>\n            <span className='question'>Mình có thể sử dụng file mới tải như thế nào?</span>\n        </p>\n\n        <div className={`file-usage-guide ${showDetails ? 'file-usage-guide-show' : 'file-usage-guide-hide'}`}>\n            <h2>Với các bạn sử dụng trên máy tính:</h2>\n            <ol>\n                <li>Các bạn truy cập vào địa chỉ sau: <a href=\"https://calendar.google.com\">https://calendar.google.com</a>.</li>\n                <li>Bấm vào <i>bánh răng</i> ở góc trên cùng bên phải, bên trong menu xuất hiện, bấm vào <i>Cài đặt</i>.</li>\n                <li>Ở bên trái, bấm vào <i>Nhập và xuất</i>.</li>\n                <li>Bấm vào <i>Chọn tiếp từ máy tính</i>.</li>\n                <li>Chọn tệp bạn vừa mới tải về, mặc định tên sẽ là <code>export.ics</code>.</li>\n                <li>Chọn lịch bạn muốn nhập môn học vào ở ô bên dưới. Bạn có thể tham khảo tạo thêm lịch cho từng học kỳ tại <a href=\"https://support.google.com/calendar/answer/37095?hl=vi\">đây</a>.</li>\n                <li>Bấm vào <i>Nhập</i>.</li>\n            </ol>\n            <h2>Với các bạn sử dụng điện thoại thông minh.</h2>\n            <ol>\n                <li>Các bạn mở tệp vừa mới tải xuống từ trình duyệt hoặc ứng dụng file của điện thoại.</li>\n                <li>Tuỳ theo hệ điều hành sẽ có thông báo nhập sự kiện vào lịch của ứng dụng trên hệ điều hành đó.</li>\n                <li>Các bạn làm theo hướng dẫn của ứng dụng.</li>\n            </ol>\n        </div>\n    </div>\n}\n\nexport default FileUsageGuide;","import { v4 as uuidv4 } from 'uuid';\n\nfunction toTimeString(week, dayOfWeek, time) { // time in the format hh:mm\n    let times = time.match(/\\d+/g);\n\n    let date = new Date(2021, 7, 16, times[0], times[1]); //start of week 33 used to calculate using offset \n\n    const weekOfset = week - 33;\n    const dayOfset = dayOfWeek - 2;\n\n    date.setDate(date.getDate() + (weekOfset * 7) + dayOfset);\n    let timeString = date.toISOString();\n\n    return (timeString.split('.')[0] + 'Z').replace(/-/g, '').replace(/:/g, '');\n}\n\nfunction generateClass(clss) {\n    let repeatTime = []\n\n    for (let i = 1; i < clss.week.length; i++) {\n        repeatTime.push(toTimeString(clss.week[i], clss.dayOfWeek, clss.time[0]))\n    }\n\n    let content = `BEGIN:VEVENT\nUID:${uuidv4()}\nDTSTAMP:${(new Date().toISOString().split('.')[0] + 'Z').replace(/-/g, '').replace(/:/g, '')}\nSUMMARY:${clss.name}\nDESCRIPTION:Mã môn: ${clss.ID}\\\\nMã lớp: ${clss.group}\nLOCATION:${clss.room}, ${clss.campus}\nDTSTART:${toTimeString(clss.week[0], clss.dayOfWeek, clss.time[0])}\nDTEND:${toTimeString(clss.week[0], clss.dayOfWeek, clss.time[1])}\nRDATE:${repeatTime.join(',')}\nEND:VEVENT`\n    return content;\n}\n\nfunction generateICSFileContent(classList) {\n    let content = `BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//bkalendar//Google Calendar v1.0/VI`;\n\n    for (let i = 0; i < classList.length; i++) {\n        if (classList[i].selected) {\n            content += `\n${generateClass(classList[i])}`\n        }\n    }\n\n    content += `\nEND:VCALENDAR`;\n    return content;\n}\n\n\nexport { toTimeString, generateICSFileContent };","import React from 'react';\nimport './App.css';\n\nimport GuideLine from './components/GuideLine/GuideLine';\nimport CalendarInputField from './components/CalendarInput/CalendarInput';\nimport CalendarSelector from './components/CalendarSelector/CalendarSelector';\nimport DownloadButton from './components/DownloadButton/DownloadButton';\nimport FileUsageGuide from './components/FileUsageGuide/FileUsageGuide';\n\nimport { parseCalendarInput } from './utils/parser';\nimport { generateICSFileContent } from './utils/generator';\n\nimport FileSaver from 'file-saver';\n\n\nclass App extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            calendarInput: '', // the input field of calendar checkbox\n            classList: [], // the list of class after parsing the input\n            timeTableValid: false\n        };\n        this.handleCalendarInputChange = this.handleCalendarInputChange.bind(this);\n        this.handleCalendarSelect = this.handleCalendarSelect.bind(this);\n        this.handleDownload = this.handleDownload.bind(this);\n    }\n\n    handleCalendarInputChange(event) {\n        this.setState({ calendarInput: event.target.value });\n\n        const classList = parseCalendarInput(event.target.value);\n\n        this.setState({ classList });\n    }\n\n    handleCalendarSelect(event) {\n        const targetSignature = event.target.value;\n        let classList = this.state.classList;\n        for (let i = 0; i < classList.length; i++) {\n            if (classList[i].signature === targetSignature) {\n                classList[i].selected = !classList[i].selected;\n                break;\n            }\n        }\n        this.setState({ classList });\n\n    }\n    handleDownload(event) {\n        const content = generateICSFileContent(this.state.classList);\n        let blob = new Blob([content], { type: 'text/calendar' });\n        FileSaver.saveAs(blob, 'export.ics');\n    }\n    render() {\n        return <React.StrictMode>\n            <div id='app_wrapper'>\n                <h1 className='header'>BK Google Calendar</h1>\n                <hr className='header_separator' />\n                <GuideLine num={1} text={'Sao chép và dán thời khoá biểu của các môn bạn muốn xuất file vào đây.'} />\n                <CalendarInputField value={this.state.calendarInput} onChange={this.handleCalendarInputChange} />\n                <GuideLine num={2} text={'Chọn môn học mà bạn muốn xuất thời khoá biểu dưới đây.'} />\n                <CalendarSelector classList={this.state.classList} changeHandler={this.handleCalendarSelect} />\n                <GuideLine num={3} text={'Bấm nút Tải xuống để tải về file ics nhé.'} />\n                <DownloadButton isDownloadable={this.state.classList.length !== 0 && this.state.classList.filter(c => c.selected).length !== 0} clickHandler={this.handleDownload} />\n                <FileUsageGuide />\n            </div>\n        </React.StrictMode>;\n    }\n}\nexport default App;\n","function parseCalendarInput(input) {\n    let line = input.split('\\n');\n\n    const lineCount = line.length;\n    let classList = [];\n\n    for (let i = 0; i < lineCount; i++) {\n        let tokenizedLine = line[i].split('\\t'); // each token is separated by \\t (tab)\n\n        if (tokenizedLine.length < 11) {\n            continue; // missing token, skip current line\n        }\n\n        let ID = tokenizedLine[0].trim();\n        let name = tokenizedLine[1].trim();\n\n        let group = tokenizedLine[4].trim();\n        \n        let dayOfWeek = tokenizedLine[5].trim();\n        if (isNaN(parseInt(dayOfWeek, 10))) {\n            continue; // invalid day\n        } else {\n            dayOfWeek = parseInt(dayOfWeek, 10);\n        }\n        \n        let time = tokenizedLine[7].trim().match(/\\d+:\\d+/g);\n        if (time === null) {\n            continue;\n        }\n\n        let room = tokenizedLine[8].trim();\n        let campus = tokenizedLine[9].trim();\n\n        let week = tokenizedLine[10].trim().match(/\\d+/g);\n        if (week === null) {\n            continue;\n        }\n        classList.push({\n            signature: ID + dayOfWeek.toString() + week.join(''),\n            ID,\n            name,\n            dayOfWeek,\n            time,\n            room,\n            campus,\n            week,\n            selected: true,\n            group\n        });\n\n    }\n    return classList;\n}\n\nexport { parseCalendarInput };","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}